<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log4Film-Buffs - Film Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
        }

        h1 {
            font-size: 3em;
            color: #f39c12;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .tagline {
            color: #95a5a6;
            font-style: italic;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            color: #f39c12;
            font-weight: bold;
        }

        .stat-label {
            color: #95a5a6;
            margin-top: 5px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: #e0e0e0;
        }

        .tab:hover {
            background: rgba(255,255,255,0.1);
        }

        .tab.active {
            background: #f39c12;
            color: #1a1a2e;
            border-color: #f39c12;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .add-film-form {
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #f39c12;
            font-weight: 500;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 6px;
            color: #e0e0e0;
            font-size: 14px;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #f39c12;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .rating-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .star-rating {
            display: flex;
            gap: 5px;
            font-size: 24px;
        }

        .star {
            cursor: pointer;
            color: #555;
            transition: color 0.2s;
        }

        .star:hover,
        .star.active {
            color: #f39c12;
        }

        button {
            padding: 12px 30px;
            background: #f39c12;
            color: #1a1a2e;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }

        button:hover {
            background: #e67e22;
            transform: translateY(-2px);
        }

        .search-bar {
            margin-bottom: 20px;
        }

        .search-bar input {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 16px;
        }

        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filters select {
            width: auto;
            min-width: 150px;
        }

        .film-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .film-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            position: relative;
        }

        .film-card:hover {
            transform: translateY(-5px);
            border-color: #f39c12;
            box-shadow: 0 10px 30px rgba(243, 156, 18, 0.2);
        }

        .film-title {
            font-size: 1.4em;
            color: #f39c12;
            margin-bottom: 10px;
        }

        .film-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            color: #95a5a6;
            font-size: 0.9em;
        }

        .film-rating {
            color: #f39c12;
            font-weight: bold;
        }

        .film-review {
            margin-top: 15px;
            color: #bdc3c7;
            line-height: 1.6;
        }

        .film-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-secondary {
            background: #34495e;
        }

        .btn-secondary:hover {
            background: #2c3e50;
        }

        .genre-tag {
            display: inline-block;
            padding: 4px 12px;
            background: rgba(243, 156, 18, 0.2);
            border-radius: 15px;
            font-size: 0.85em;
            margin-right: 5px;
            margin-top: 5px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #95a5a6;
        }

        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .export-import {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .film-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-direction: column;
            }

            .filters {
                flex-direction: column;
            }

            .filters select {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ¬ Log4Film-Buffs</h1>
            <p class="tagline">Your Personal Film Diary</p>
        </header>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalFilms">0</div>
                <div class="stat-label">Films Watched</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="avgRating">0.0</div>
                <div class="stat-label">Average Rating</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalHours">0</div>
                <div class="stat-label">Hours Watched</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="watchlistCount">0</div>
                <div class="stat-label">Watchlist</div>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('add')">Add Film</div>
            <div class="tab" onclick="switchTab('watched')">Watched</div>
            <div class="tab" onclick="switchTab('watchlist')">Watchlist</div>
            <div class="tab" onclick="switchTab('stats')">Statistics</div>
        </div>

        <div id="addTab" class="tab-content active">
            <div class="add-film-form">
                <h2 style="margin-bottom: 20px; color: #f39c12;">Log a Film</h2>
                <form id="filmForm">
                    <div class="form-group">
                        <label for="title">Film Title *</label>
                        <input type="text" id="title" required>
                    </div>

                    <div class="form-group">
                        <label for="director">Director</label>
                        <input type="text" id="director">
                    </div>

                    <div class="form-group">
                        <label for="year">Year</label>
                        <input type="number" id="year" min="1800" max="2099">
                    </div>

                    <div class="form-group">
                        <label for="genre">Genre</label>
                        <select id="genre">
                            <option value="">Select genre...</option>
                            <option value="Action">Action</option>
                            <option value="Comedy">Comedy</option>
                            <option value="Drama">Drama</option>
                            <option value="Horror">Horror</option>
                            <option value="Sci-Fi">Sci-Fi</option>
                            <option value="Romance">Romance</option>
                            <option value="Thriller">Thriller</option>
                            <option value="Documentary">Documentary</option>
                            <option value="Animation">Animation</option>
                            <option value="Fantasy">Fantasy</option>
                            <option value="Crime">Crime</option>
                            <option value="Western">Western</option>
                            <option value="Musical">Musical</option>
                            <option value="War">War</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="runtime">Runtime (minutes)</label>
                        <input type="number" id="runtime" min="1">
                    </div>

                    <div class="form-group">
                        <label for="dateWatched">Date Watched</label>
                        <input type="date" id="dateWatched">
                    </div>

                    <div class="form-group">
                        <label>Your Rating *</label>
                        <div class="rating-input">
                            <div class="star-rating" id="starRating">
                                <span class="star" data-rating="1">â˜…</span>
                                <span class="star" data-rating="2">â˜…</span>
                                <span class="star" data-rating="3">â˜…</span>
                                <span class="star" data-rating="4">â˜…</span>
                                <span class="star" data-rating="5">â˜…</span>
                            </div>
                            <span id="ratingValue">0/5</span>
                        </div>
                        <input type="hidden" id="rating" required>
                    </div>

                    <div class="form-group">
                        <label for="review">Your Review</label>
                        <textarea id="review" placeholder="What did you think of this film?"></textarea>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isWatchlist" style="width: auto; margin-right: 10px;">
                            Add to watchlist instead of watched
                        </label>
                    </div>

                    <button type="submit">Save Film</button>
                </form>
            </div>
        </div>

        <div id="watchedTab" class="tab-content">
            <div class="search-bar">
                <input type="text" id="searchWatched" placeholder="Search watched films...">
            </div>
            <div class="filters">
                <select id="filterGenre">
                    <option value="">All Genres</option>
                    <option value="Action">Action</option>
                    <option value="Comedy">Comedy</option>
                    <option value="Drama">Drama</option>
                    <option value="Horror">Horror</option>
                    <option value="Sci-Fi">Sci-Fi</option>
                    <option value="Romance">Romance</option>
                    <option value="Thriller">Thriller</option>
                    <option value="Documentary">Documentary</option>
                    <option value="Animation">Animation</option>
                    <option value="Fantasy">Fantasy</option>
                    <option value="Crime">Crime</option>
                    <option value="Western">Western</option>
                    <option value="Musical">Musical</option>
                    <option value="War">War</option>
                    <option value="Other">Other</option>
                </select>
                <select id="sortWatched">
                    <option value="recent">Recently Watched</option>
                    <option value="rating">Highest Rated</option>
                    <option value="title">Title (A-Z)</option>
                    <option value="year">Year</option>
                </select>
            </div>
            <div id="watchedFilms" class="film-grid"></div>
        </div>

        <div id="watchlistTab" class="tab-content">
            <div class="search-bar">
                <input type="text" id="searchWatchlist" placeholder="Search watchlist...">
            </div>
            <div id="watchlistFilms" class="film-grid"></div>
        </div>

        <div id="statsTab" class="tab-content">
            <div class="add-film-form">
                <h2 style="margin-bottom: 20px; color: #f39c12;">Your Film Statistics</h2>
                <div id="genreBreakdown"></div>
                <div id="yearBreakdown" style="margin-top: 30px;"></div>
                <div id="topRated" style="margin-top: 30px;"></div>
                
                <div class="export-import">
                    <button onclick="exportData()">Export Data (JSON)</button>
                    <button class="btn-secondary" onclick="document.getElementById('importFile').click()">Import Data</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let films = JSON.parse(localStorage.getItem('films')) || [];
        let watchlist = JSON.parse(localStorage.getItem('watchlist')) || [];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            renderWatchedFilms();
            renderWatchlist();
            setupStarRating();
            setupEventListeners();
            setDefaultDate();
        });

        function setDefaultDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('dateWatched').value = today;
        }

        function setupStarRating() {
            const stars = document.querySelectorAll('.star');
            const ratingInput = document.getElementById('rating');
            const ratingValue = document.getElementById('ratingValue');

            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = this.dataset.rating;
                    ratingInput.value = rating;
                    ratingValue.textContent = `${rating}/5`;
                    
                    stars.forEach(s => {
                        if (s.dataset.rating <= rating) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                });

                star.addEventListener('mouseenter', function() {
                    const rating = this.dataset.rating;
                    stars.forEach(s => {
                        if (s.dataset.rating <= rating) {
                            s.style.color = '#f39c12';
                        }
                    });
                });

                star.addEventListener('mouseleave', function() {
                    stars.forEach(s => {
                        const currentRating = ratingInput.value;
                        if (s.dataset.rating <= currentRating) {
                            s.style.color = '#f39c12';
                        } else {
                            s.style.color = '#555';
                        }
                    });
                });
            });
        }

        function setupEventListeners() {
            document.getElementById('filmForm').addEventListener('submit', addFilm);
            document.getElementById('searchWatched').addEventListener('input', renderWatchedFilms);
            document.getElementById('filterGenre').addEventListener('change', renderWatchedFilms);
            document.getElementById('sortWatched').addEventListener('change', renderWatchedFilms);
            document.getElementById('searchWatchlist').addEventListener('input', renderWatchlist);
        }

        function addFilm(e) {
            e.preventDefault();

            const film = {
                id: Date.now(),
                title: document.getElementById('title').value,
                director: document.getElementById('director').value,
                year: document.getElementById('year').value,
                genre: document.getElementById('genre').value,
                runtime: parseInt(document.getElementById('runtime').value) || 0,
                dateWatched: document.getElementById('dateWatched').value,
                rating: parseInt(document.getElementById('rating').value),
                review: document.getElementById('review').value
            };

            const isWatchlist = document.getElementById('isWatchlist').checked;

            if (isWatchlist) {
                watchlist.push(film);
                localStorage.setItem('watchlist', JSON.stringify(watchlist));
                renderWatchlist();
            } else {
                films.push(film);
                localStorage.setItem('films', JSON.stringify(films));
                renderWatchedFilms();
            }

            updateStats();
            document.getElementById('filmForm').reset();
            resetStars();
            setDefaultDate();
            alert(`${film.title} added to ${isWatchlist ? 'watchlist' : 'watched films'}!`);
        }

        function resetStars() {
            document.querySelectorAll('.star').forEach(s => s.classList.remove('active'));
            document.getElementById('ratingValue').textContent = '0/5';
        }

        function updateStats() {
            // Total films
            document.getElementById('totalFilms').textContent = films.length;

            // Average rating
            const avgRating = films.length > 0
                ? (films.reduce((sum, f) => sum + f.rating, 0) / films.length).toFixed(1)
                : '0.0';
            document.getElementById('avgRating').textContent = avgRating;

            // Total hours
            const totalMinutes = films.reduce((sum, f) => sum + f.runtime, 0);
            const totalHours = Math.round(totalMinutes / 60);
            document.getElementById('totalHours').textContent = totalHours;

            // Watchlist count
            document.getElementById('watchlistCount').textContent = watchlist.length;

            // Update stats tab
            updateStatsTab();
        }

        function updateStatsTab() {
            // Genre breakdown
            const genreCounts = {};
            films.forEach(f => {
                if (f.genre) {
                    genreCounts[f.genre] = (genreCounts[f.genre] || 0) + 1;
                }
            });

            const genreHTML = `
                <h3 style="color: #f39c12; margin-bottom: 15px;">Films by Genre</h3>
                ${Object.entries(genreCounts)
                    .sort((a, b) => b[1] - a[1])
                    .map(([genre, count]) => `
                        <div style="margin: 10px 0; display: flex; justify-content: space-between; align-items: center;">
                            <span>${genre}</span>
                            <span style="color: #f39c12; font-weight: bold;">${count}</span>
                        </div>
                    `).join('') || '<p style="color: #95a5a6;">No data yet</p>'}
            `;
            document.getElementById('genreBreakdown').innerHTML = genreHTML;

            // Top rated films
            const topRated = [...films]
                .sort((a, b) => b.rating - a.rating)
                .slice(0, 5);

            const topRatedHTML = `
                <h3 style="color: #f39c12; margin-bottom: 15px;">Top Rated Films</h3>
                ${topRated.map(f => `
                    <div style="margin: 15px 0; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: bold;">${f.title}</div>
                                <div style="color: #95a5a6; font-size: 0.9em;">${f.year || 'N/A'} â€¢ ${f.director || 'Unknown'}</div>
                            </div>
                            <div style="color: #f39c12; font-size: 1.2em; font-weight: bold;">${'â˜…'.repeat(f.rating)}</div>
                        </div>
                    </div>
                `).join('') || '<p style="color: #95a5a6;">No films yet</p>'}
            `;
            document.getElementById('topRated').innerHTML = topRatedHTML;
        }

        function renderWatchedFilms() {
            const searchTerm = document.getElementById('searchWatched').value.toLowerCase();
            const filterGenre = document.getElementById('filterGenre').value;
            const sortBy = document.getElementById('sortWatched').value;

            let filtered = films.filter(f => {
                const matchesSearch = f.title.toLowerCase().includes(searchTerm) ||
                    (f.director && f.director.toLowerCase().includes(searchTerm));
                const matchesGenre = !filterGenre || f.genre === filterGenre;
                return matchesSearch && matchesGenre;
            });

            // Sort
            filtered.sort((a, b) => {
                switch(sortBy) {
                    case 'recent':
                        return new Date(b.dateWatched) - new Date(a.dateWatched);
                    case 'rating':
                        return b.rating - a.rating;
                    case 'title':
                        return a.title.localeCompare(b.title);
                    case 'year':
                        return (b.year || 0) - (a.year || 0);
                    default:
                        return 0;
                }
            });

            const container = document.getElementById('watchedFilms');
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸŽ¬</div>
                        <h3>No films found</h3>
                        <p>Start logging your film journey!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filtered.map(f => `
                <div class="film-card">
                    <div class="film-title">${f.title}</div>
                    <div class="film-meta">
                        ${f.year ? `<span>${f.year}</span>` : ''}
                        ${f.director ? `<span>Dir: ${f.director}</span>` : ''}
                        ${f.runtime ? `<span>${f.runtime}min</span>` : ''}
                    </div>
                    ${f.genre ? `<span class="genre-tag">${f.genre}</span>` : ''}
                    <div class="film-rating">${'â˜…'.repeat(f.rating)}${'â˜†'.repeat(5-f.rating)} ${f.rating}/5</div>
                    ${f.dateWatched ? `<div style="color: #95a5a6; font-size: 0.9em; margin-top: 10px;">Watched: ${formatDate(f.dateWatched)}</div>` : ''}
                    ${f.review ? `<div class="film-review">${f.review}</div>` : ''}
                    <div class="film-actions">
                        <button class="btn-small btn-danger" onclick="deleteFilm(${f.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function renderWatchlist() {
            const searchTerm = document.getElementById('searchWatchlist').value.toLowerCase();
            
            const filtered = watchlist.filter(f => 
                f.title.toLowerCase().includes(searchTerm) ||
                (f.director && f.director.toLowerCase().includes(searchTerm))
            );

            const container = document.getElementById('watchlistFilms');
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸ“‹</div>
                        <h3>Watchlist is empty</h3>
                        <p>Add films you want to watch!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = filtered.map(f => `
                <div class="film-card">
                    <div class="film-title">${f.title}</div>
                    <div class="film-meta">
                        ${f.year ? `<span>${f.year}</span>` : ''}
                        ${f.director ? `<span>Dir: ${f.director}</span>` : ''}
                    </div>
                    ${f.genre ? `<span class="genre-tag">${f.genre}</span>` : ''}
                    <div class="film-actions">
                        <button class="btn-small" onclick="moveToWatched(${f.id})">Mark as Watched</button>
                        <button class="btn-small btn-danger" onclick="deleteFromWatchlist(${f.id})">Remove</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteFilm(id) {
            if (confirm('Are you sure you want to delete this film?')) {
                films = films.filter(f => f.id !== id);
                localStorage.setItem('films', JSON.stringify(films));
                updateStats();
                renderWatchedFilms();
            }
        }

        function deleteFromWatchlist(id) {
            if (confirm('Remove this film from watchlist?')) {
                watchlist = watchlist.filter(f => f.id !== id);
                localStorage.setItem('watchlist', JSON.stringify(watchlist));
                updateStats();
                renderWatchlist();
            }
        }

        function moveToWatched(id) {
            const film = watchlist.find(f => f.id === id);
            if (film) {
                const dateWatched = prompt('Date watched (YYYY-MM-DD):', new Date().toISOString().split('T')[0]);
                const rating = prompt('Your rating (1-5):', '4');
                
                if (dateWatched && rating) {
                    film.dateWatched = dateWatched;
                    film.rating = parseInt(rating);
                    films.push(film);
                    watchlist = watchlist.filter(f => f.id !== id);
                    
                    localStorage.setItem('films', JSON.stringify(films));
                    localStorage.setItem('watchlist', JSON.stringify(watchlist));
                    
                    updateStats();
                    renderWatchedFilms();
                    renderWatchlist();
                }
            }
        }

        function switchTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Update content
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(tab + 'Tab').classList.add('active');
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
        }

        function exportData() {
            const data = {
                films: films,
                watchlist: watchlist,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `log4film-buffs-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
        }

        function importData(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (confirm('This will replace your current data. Continue?')) {
                            films = data.films || [];
                            watchlist = data.watchlist || [];
                            localStorage.setItem('films', JSON.stringify(films));
                            localStorage.setItem('watchlist', JSON.stringify(watchlist));
                            updateStats();
                            renderWatchedFilms();
                            renderWatchlist();
                            alert('Data imported successfully!');
                        }
                    } catch (error) {
                        alert('Error importing data. Please check the file format.');
                    }
                };
                reader.readAsText(file);
            }
        }
    </script>
</body>
</html>